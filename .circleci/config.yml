version: 2.1

jobs:
  create_file:
    docker:
      - image: cimg/base:stable
    steps:
      - run:
          name: Create file
          command: |
            mkdir output
            echo "Hello from Job 1" > output/hello.txt
      - persist_to_workspace:
          root: output
          paths:
            - hello.txt

  read_file:
    docker:
      - image: cimg/base:stable
    steps:
      - attach_workspace:
          at: /workspace
      - run:
          name: Read file
          command: cat /workspace/hello.txt

workflows:
  use_workspace:
    jobs:
      - create_file
      - read_file:
          requires:
            - create_file
